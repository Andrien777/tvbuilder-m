# TVBuilder-M

<img width="2560" height="1380" alt="image_2025-09-05_22-53-25" src="https://github.com/user-attachments/assets/9c8cf3f9-e2b7-4443-bbce-3fa5bf06dfc6" />

## Общие сведения

TVBuilder-M - симулятор схем на элементах дискретной логики российских производителей с открытым исходным кодом.
Программа предназначена для обучения школьников, студентов ВУЗов, работников компаний основам схемотехники на основе советских/российских элементов микросхем.

ПО стремится моделировать схемы, возможные к использованию на лабораторных стендах для обучения схемотехнике и применяться как тестовый этап перед выполнением работы на настоящих элементах.

Web-версия проекта доступна по [ссылке](https://andrien777.github.io).

## Особенности

- Наличие российских/советских микросхем
- 8088-подобный микропроцессор с потактовой симуляцией
- RISC-V микропроцессор с архитектурой rv32ima
- Симуляция схем в реальном времени
- Возможность построения временных диаграмм сигналов
- Наличие web версии


## Поддерживаемые платформы

- Windows (x86-64)
- Linux (x86-64)
- MacOS
- Web

## Сборка программ под микропроцессоры

Используемые в программе микропроцессоры позволяют загрузку baremetal binary файлов, получаемых в результате компиляции в предоставленной среде сборки.


[Среда сборки для микропроцессоров](https://github.com/Andrien777/tvbuilder-compilation-environments)

Использование среды сборки рекомендуется, но не является обязательным.

## Сборка программы из исходного кода

Основная часть симулятора написана на языке GDScript, процесс сборки подразумевает открытие файла ```project.godot``` в движке Godot и экспорт по имеющимся шаблонам.

Микропроцессоры выделены в отдельную библиотеку, которая использует GDExtension для взаимодействия с движком Godot.

Программа может работать без этих библиотек, но в таком случае будут недоступны оба микроконтроллера.

Сборка библиотеки может осуществляться в ручном режиме, или с помощью контейнера Docker.

### Сборка с помощью Docker (рекомендуется)

Для сборки под MacOS понадобится скачать с сайта Apple дистрибутив утилит командной строки XCode. В docker образе зафиксирована версия _Command_Line_Tools_for_Xcode_16.4.dmg_, при необходимости ее можно изменить в Dockerfile.
```bash
docker build -t "tvb_build" . --build-arg BUILD_MACOS=[y//n] --build-arg BUILD_WEB=[y//n]
```

```bash
docker run --mount type=bind,source=.,target="/opt/tvb-build" -e BUILD_TARGET=[RELEASE//DEBUG] tvb_build
```
### Сборка вручную

Необходимо установить зависимости для сборки, после чего использовать систему сборки scons.

```
    build-essential 
    python3 
    git
    ca-certificates 
    python3-pip 
    bash 
    gcc-mingw-w64-x86-64-posix 
    g++-mingw-w64-x86-64-posix 
    clang 
    cmake 
    patch 
    python-is-python3 
    libssl-dev 
    liblzma-dev 
    lzma-dev 
    libxml2-dev 
    xz-utils 
    bzip2 
    cpio 
    libbz2-dev 
    zlib1g-dev
```

```bash 
scons platform=linux target=template_release
```


Для сборки web:

Дополнительно необходимо установить _Emscripten SDK_

```bash
./emsdk/emsdk activate latest
source ./emsdk/emsdk_env.sh
scons platform=web target=template_release
```
Для сборки под macos:

Дополнительно необходимо установить _osxcross_ по инструкции из официального репозитория.

```bash
export OSXCROSS_ROOT=<osxcross_path>
scons platform=macos target=template_release osxcross_sdk=darwin23
```
## Участие в разработке

Приветствуется любая обратная связь, улучшения / PR, Issues.

_ПО, включая название TVBuilder-M зарегистрировано в Федеральной служба по интеллектуальной собственности, №2025661814_
